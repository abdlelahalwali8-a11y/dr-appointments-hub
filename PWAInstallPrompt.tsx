import React, { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '@/components/ui/dialog';\nimport { Download, X, Smartphone } from 'lucide-react';\nimport { usePWA } from '@/hooks/usePWA';\n\nconst PWAInstallPrompt = () => {\n  const { isInstallable, isInstalled, installPWA } = usePWA();\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [showDialog, setShowDialog] = useState(false);\n\n  useEffect(() => {\n    if (isInstallable && !isInstalled) {\n      setShowPrompt(true);\n    }\n  }, [isInstallable, isInstalled]);\n\n  const handleInstall = async () => {\n    const success = await installPWA();\n    if (success) {\n      setShowPrompt(false);\n      setShowDialog(false);\n    }\n  };\n\n  if (!showPrompt) return null;\n\n  return (\n    <>\n      {/* Floating Install Button */}\n      <button\n        onClick={() => setShowDialog(true)}\n        className=\"fixed bottom-6 right-6 z-40 p-3 bg-primary text-white rounded-full shadow-lg hover:shadow-xl transition-shadow md:hidden\"\n        title=\"تثبيت التطبيق\"\n      >\n        <Download className=\"w-6 h-6\" />\n      </button>\n\n      {/* Install Dialog */}\n      <Dialog open={showDialog} onOpenChange={setShowDialog}>\n        <DialogContent className=\"max-w-sm\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Smartphone className=\"w-5 h-5 text-primary\" />\n              تثبيت التطبيق\n            </DialogTitle>\n            <DialogDescription>\n              ثبّت تطبيق نظام المواعيد الطبية على جهازك للوصول السريع والعمل بدون اتصال\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n              <h4 className=\"font-semibold text-blue-900 mb-2\">المميزات:</h4>\n              <ul className=\"text-sm text-blue-800 space-y-1\">\n                <li>✓ وصول سريع من الشاشة الرئيسية</li>\n                <li>✓ العمل بدون اتصال بالإنترنت</li>\n                <li>✓ إشعارات فورية</li>\n                <li>✓ تجربة تطبيق أصلي</li>\n              </ul>\n            </div>\n          </div>\n\n          <DialogFooter className=\"gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setShowDialog(false)}\n            >\n              لاحقاً\n            </Button>\n            <Button\n              variant=\"medical\"\n              onClick={handleInstall}\n            >\n              <Download className=\"w-4 h-4 ml-2\" />\n              تثبيت الآن\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n\nexport default PWAInstallPrompt;\n
